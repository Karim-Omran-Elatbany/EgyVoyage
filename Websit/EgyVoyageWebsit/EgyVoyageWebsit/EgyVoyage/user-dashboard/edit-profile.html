<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EgyVoyage</title>
  <link rel="stylesheet" href="/css/all.min.css">
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/home.css">
  <link rel="stylesheet" href="/user-dashboard/user.css">
  <link rel="stylesheet" href="/css/all-hotels.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,200;0,9..40,300;0,9..40,400;0,9..40,500;1,9..40,300&display=swap">
    <style>
      .row.content {
        height: 700px
      }
  
      .sidenav {
        height: 100%;
      }
  
      @media screen and (max-width: 767px) {
        .sidenav {
          height: auto;
          padding: 15px;
        }
  
        .row.content {
          height: auto;
        }
      }
    </style>
</head>





<div style="width: 40%; margin-left:30%; " id="success-alert"></div>
<div style="width: 40%; margin-left:30%; " id="fail-alert"></div>
<!-- Start Navbar -->
<nav class="navbar navbar-expand-lg">
  
  <a class="navbar-brand" href="#"><img src="/imgs/logo.png" class="" alt=""></a>
  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
    aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <i class="fa-solid fa-bars"></i>
  </button>
  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav m-auto mb-2 mb-lg-0">
      <li class="nav-item">
        <a class="nav-link p-3 active" aria-current="page" href="/index.html">Home</a>
      </li>
      <li class="nav-item">
        <a class="nav-link p-3 " href="/destination.html">Destination</a>
      </li>
      <li class="nav-item">
        <a class="nav-link p-3 " href="/all-hotels.html">Our Hotels</a>
      </li>
    </ul>
    <div class="user-name user-info">
      <span id="user-name-icon"><i class="fa-solid fa-user me-2"></i></span>
      <span id="user-name-text"></span>
      <span><i class="ms-2 fa-solid fa-caret-down"></i></span>
      <ul>
            <li><a href="/user-dashboard/user.html">Dashboard</a></li>
            <li><a href="/user-dashboard/edit-profile.html">Edit Profile</a></li>
            <li><a id="signout" href="#">Signout</a></li>
      </ul> 
    </div>
    <a class="btn btn-primary opacity-75 px-3" id="lgn" href="#" role="button">Login</a>
    <div id="login-overlay">
      <div class="login-container p-4">
        <h1>Login<span class="closeBtn">x</span></h1>
        <form class="" action="/login" method="post">
          <div class="d-flex justify-content-between mt-5">
            <div class="name-pass d-flex">
              <label for="username">Username or Email</label>
              <input type="text" id="username" name="username" placeholder="Username or Email">
            </div>
            <div class="name-pass d-flex">
              <label for="password">Password</label>
              <input type="password" id="password" name="password" placeholder="Password">
            </div>
          </div>
          <button type="submit">Sign In</button>
          <div class="clk-a d-flex flex-column">
            <a class="first-a" href="#">Forgot Password?</a>
            <span class="hv-account">DO NOT HAVE AN ACCOUNT?</span>
            <a class="last-a" href="/register.html">Create an Account</a>
          </div>
        </form>
      </div>
    </div>
  </div>
</nav>
<!-- End Navbar -->

<!-- Start Tours -->
<div class="main-tour pt-5 pb-5">
  <div class="conatiner">
    <div class="mt-4 d-flex justify-content-center align-items-center flex-column">
      <h1 class="fw-bold pb-5">Dashboard</h1>
    </div>
  </div>
</div>






<div class="container-fluid">
  <div class="row content">
    <div class="col-sm-2 sidenav p-4">
      <h4 class="py-4">My Account</h4>
      <ul class="nav nav-pills nav-stacked d-flex flex-column">
        <li><a href="/user-dashboard/user.html"><i class="fa-solid me-2 fa-tv"></i>Dashboard</a></li>
        <li class="active"><a href="#"><i class="fa-solid fa-pen-to-square me-2"></i>Edit Profile</a></li>
        <li><a href="/user-dashboard/change-password.html"><i class="fa-solid fa-user-lock me-2"></i> Change Passowrd</a></li>
      </ul><br>
      <h4 class="py-4">Hotels Booking</h4>
      <ul class="nav nav-pills nav-stacked d-flex flex-column">
        <li><a href="/user-dashboard/booking.html"><i class="fa-solid fa-file me-2"></i>My Booking</a></li>
      </ul><br>
    </div>
    <div class="col-sm-9">
      <div class="editProfile">
        <div class="directory p-5"><a href="/user-dashboard/user.html" class="me-2">Dashboard <span class="ms-2">></span></a>Edit Profile</div>
        <div class="row flex-column   position-relative">
          <div class="col-lg-6 d-flex px-5 py-4 editing">
            <label for="firstName">First Name*</label>
            <input class="ms-5" type="text" id="firstName" name="firstName" required>
          </div>
          <div class="col-lg-6 d-flex px-5 py-4 editing">
            <label for="lastName">Last Name*</label>
            <input class="ms-5" type="text" id="lastName" name="lastName" required>
          </div>
          <div class="col-lg-6 d-flex px-5 py-4 editing">
            <label for="email">Email*</label>
            <input class="ms-5" type="email" id="emaill" name="email" required>
          </div>
        
          <div class="col-lg-6 d-flex px-5 py-4 editing">
            <label for="phone">Phone*</label>
            <input class="ms-5" type="phone" id="phone" name="phone" required>
          </div>
          
          <button id="edit" class="update btn btn-primary mt-6 " type="submit">Update Profile</button>
          </div>
      </div>
    </div>
  </div>
</div>








<!-- Start Footer -->
<div class="footer pt-5 pb-5 text-md-start text-center text-white-50 mt-5">
  <div class="container">
    <div class="row">
      <div class="col-md-6 col-lg-4 mb-5 mb-lg-0">
        <img src="/imgs/logo.png" alt="">
        <p class="mt-4">
          In Egypt, the walking rhyme,
          the charming sentence,
          the rebellious article,
          and the fragrant idea
        </p>
        <div class="copyright mt-5">
          Created By <span>Saqr</span>
          <div>&copy; 2024 - <span>BFCAI</span></div>
        </div>
      </div>
      <div class="col-md-6 col-lg-2 mb-5 mb-lg-0">
        <div class="links">
          <h5 class="text-light mb-2">Links</h5>
          <ul class="list-unstyled lh-lg">
            <li class="mb-2">Home</li>
            <li class="mb-2">Our Services</li>
            <li class="mb-2">Portfolio</li>
            <li class="mb-2">Testimonials</li>
            <li class="mb-2">Support</li>
            <li class="mb-2">Terms and Condition</li>
          </ul>
        </div>
      </div>
      <div class="col-md-6 col-lg-2 mb-5">
        <div class="links">
          <h5 class="text-light mb-2">About Us</h5>
          <ul class="list-unstyled lh-lg">
            <li class="mb-2">Sign in</li>
            <li class="mb-2">Rsgister</li>
            <li class="mb-2">About Us</li>
            <li class="mb-2">Blog</li>
            <li class="mb-2">Contact Us</li>
          </ul>
        </div>
      </div>
      <div class="col-md-6 col-lg-4">
        <div class="contact">
          <h5 class="text-light mb-2">Contact Us</h5>
          <p class="mt-3 mb-5 lh-lg">
            Get in touch with us via mail phone.We are waiting for your call or message
          </p>
          <a class="btn main-btn rounded-pill w-100" href="#">graphberry@gmail.com</a>
          <ul class="d-flex mt-5 gap-5 list-unstyled justify-content-center">
            <li>
              <a class="d-block text-light" href="#">
                <i class="fa-brands fa-facebook facebook rounded-circle p-2"></i>
              </a>
            </li>
            <li>
              <a class="d-block text-light" href="#">
                <i class="fa-brands fa-twitter twitter rounded-circle p-2"></i>
              </a>
            </li>
            <li>
              <a class="d-block text-light" href="#">
                <i class="fa-brands fa-linkedin linkedin rounded-circle p-2"></i>
              </a>
            </li>
            <li>
              <a class="d-block text-light" href="#">
                <i class="fa-brands fa-youtube youtube rounded-circle p-2"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>
<nav class="navbar nav-footer navbar-expand-lg p-3">
  <div class="container foot">
    <ul class="navbar-nav me-auto mb-lg-0">
      <li class="nav-item">
        <a class="nav-link" aria-current="page" href="#">Home</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">About</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">Blog</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">Contact</a>
      </li>
    </ul>
    <div>Copyright Â© 2024 GoodLayers. All Rights Reserved.</div>
  </div>
</nav>
<!-- End Footer -->


<script src="/js/searched-hotels.js"></script>
<script src="/js/all.min.js"></script>
<script src="/js/bootstrap.bundle.min.js"></script>
<script src="/js/egyVoyage.js"></script>

<script>
  document.getElementById("lastName").value = localStorage.getItem("lname");
  document.getElementById("firstName").value = localStorage.getItem("fname");
  document.getElementById("emaill").value = localStorage.getItem("email");
  document.getElementById("phone").value = localStorage.getItem("phone");
  
  const updateBtn = document.getElementById('edit');
  updateBtn.addEventListener('click', function(event) {
    event.preventDefault();
  
    let Fname = document.getElementById('firstName').value;
    let Lname = document.getElementById('lastName').value;
    let phone = document.getElementById('phone').value;
    let Email = document.getElementById('emaill').value;
    if(Fname == ""){
        showAlert("danger","First name field required")
      }else if(Lname == ""){
        showAlert("danger","Last name field required")
      }else if(phone==""){
        showAlert("danger","Phone field required")
      }
      else if(Email==""){
        showAlert("danger","Email field required")
      }else{
        fetch(`http://egyvoyage2.somee.com/api/User/Edit?Email=${Email}`, {
          method: "POST",
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            "fName": Fname,
            "lName": Lname,
            "email": Email,
            "phoneNumber": phone,
          })
        })
        .then((data) => {
          console.log(data);
          localStorage.setItem("fname", Fname);
          localStorage.setItem("lname", Lname);
          localStorage.setItem("email", Email);
          localStorage.setItem("phone", phone);
          showAlert('success',"Profile updated successfully");
        })
        .catch((error) => {
          showAlert('danger' , "Fail to update profile , Try again");
          console.log(error);
        });
      }
  });
  
  
  
  function setupUI() {
    const response = localStorage.getItem("response");
    const code = localStorage.getItem("code");
    const email = localStorage.getItem("email");
    let login = document.getElementById("lgn");
  
    if (email != null || code != null) {
      login.style.visibility = "hidden";
      let lname = localStorage.getItem("lname");
      let fname = localStorage.getItem("fname");
      var name = fname.concat(" ").concat(lname);
      let userNameText = document.getElementById("user-name-text");
      userNameText.textContent = name;
      
    } else {
      login.style.visibility = "visible";
      document.querySelector(".user-name").style.display = "none";
    }
  }
  
  setupUI();
  
  let signoutBtn = document.getElementById("signout");
  signoutBtn.addEventListener("click", function(event) {
    event.preventDefault();
    localStorage.clear();
    let login = document.getElementById("lgn");
    login.style.visibility = "visible";
    showAlert('success',"Logout successfull");
  });
  
  setupUI();

  function showAlert(type, message) {
    const alertDiv = document.createElement("div");
    alertDiv.className = `alert alert-${type} alert-dismissible fade show`;
    alertDiv.role = "alert";
    alertDiv.innerHTML = `
      <strong class="fw-normal">${message}</strong>
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close""></button>
    `;

    document.getElementById("success-alert").appendChild(alertDiv);
    document.getElementById("success-alert").style.display = "block";

    setTimeout(() => {
      alertDiv.classList.remove("show");
      setTimeout(() => {
        alertDiv.remove();
      }, 150);
    }, 3000);
  }
  </script>
  


<body>
</body>

</html>











<!-- 
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EgyVoyage</title>
  <link rel="stylesheet" href="/css/all.min.css">
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/home.css">
  <link rel="stylesheet" href="/user-dashboard/user.css">
  <link rel="stylesheet" href="/css/all-hotels.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,200;0,9..40,300;0,9..40,400;0,9..40,500;1,9..40,300&display=swap">
  <style>
    .row.content {
      height: 700px
    }

    .sidenav {
      height: 100%;
    }

    @media screen and (max-width: 767px) {
      .sidenav {
        height: auto;
        padding: 15px;
      }

      .row.content {
        height: auto;
      }
    }
  </style>
</head>

<body>
  <div style="width: 30%; margin-left:35%; font-size: 17px;" id="success-Alart"></div>
  <div style="width: 30%; margin-left:35%; font-size: 17px;" id="fail-Alart"></div>

  <!-- Start Navbar -->
  <!-- <nav class="navbar navbar-expand-lg">
    <a class="navbar-brand" href="#"><img src="/imgs/logo.png" class="" alt=""></a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <i class="fa-solid fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav m-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link p-3 active" aria-current="page" href="/index.html">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link p-3 " href="/destination.html">Destination</a>
        </li>
        <li class="nav-item">
          <a class="nav-link p-3 " href="/all-hotels.html">Our Hotels</a>
        </li>
      </ul>
      <div class="user-name user-info">
        <span id="user-name-icon"><i class="fa-solid fa-user me-2"></i></span>
        <span id="user-name-text"></span>
        <span><i class="ms-2 fa-solid fa-caret-down"></i></span>
        <ul>
          <li><a href="/user-dashboard/user.html">Dashboard</a></li>
          <li><a href="/user-dashboard/edit-profile.html">Edit Profile</a></li>
          <li><a id="signout" href="#">Signout</a></li>
        </ul>
      </div>
      <a class="btn btn-primary opacity-75 px-3" id="lgn" href="#" role="button">Login</a>
      <div id="login-overlay">
        <div class="login-container p-4">
          <h1>Login<span class="closeBtn">x</span></h1>
          <form class="" action="/login" method="post">
            <div class="d-flex justify-content-between mt-5">
              <div class="name-pass d-flex">
                <label for="username">Username or Email</label>
                <input type="text" id="username" name="username" placeholder="Username or Email">
              </div>
              <div class="name-pass d-flex">
                <label for="password">Password</label>
                <input type="password" id="password" name="password" placeholder="Password">
              </div>
            </div>
            <button type="submit">Sign In</button>
            <div class="clk-a d-flex flex-column">
              <a class="first-a" href="#">Forgot Password?</a>
              <span class="hv-account">DO NOT HAVE AN ACCOUNT?</span>
              <a class="last-a" href="/register.html">Create an Account</a>
            </div>
          </form>
        </div>
      </div>
    </div>
  </nav> -->
  <!-- End Navbar -->

  <!-- Start Tours -->
  <!-- <div class="main-tour pt-5 pb-5">
    <div class="conatiner">
      <div class="mt-4 d-flex justify-content-center align-items-center flex-column">
        <h1 class="fw-bold pb-5">Dashboard</h1>
      </div>
    </div>
  </div>

  <div class="container-fluid">
    <div class="row content">
      <div class="col-sm-2 sidenav p-4">
        <h4 class="py-4">My Account</h4>
        <ul class="nav nav-pills nav-stacked d-flex flex-column">
          <li><a href="/user-dashboard/user.html"><i class="fa-solid me-2 fa-tv"></i>Dashboard</a></li>
          <li class="active"><a href="#"><i class="fa-solid fa-pen-to-square me-2"></i>Edit Profile</a></li>
          <li><a href="/user-dashboard/change-password.html"><i class="fa-solid fa-user-lock me-2"></i> Change Password</a></li>
        </ul><br>
        <h4 class="py-4">Hotels Booking</h4>
        <ul class="nav nav-pills nav-stacked d-flex flex-column">
          <li><a href="/user-dashboard/booking.html"><i class="fa-solid fa-file me-2"></i>My Booking</a></li>
        </ul><br>
      </div>
      <div class="col-sm-9">
        <div class="editProfile">
          <div class="directory p-5"><a href="/user-dashboard/user.html" class="me-2">Dashboard <span class="ms-2">></span></a>Edit Profile</div>
          <div class="row flex-column position-relative">
            <div class="col-lg-6 d-flex px-5 py-4 editing">
              <label for="firstName">First Name*</label>
              <input class="ms-5" type="text" id="firstName" name="firstName" required>
            </div>
            <div class="col-lg-6 d-flex px-5 py-4 editing">
              <label for="lastName">Last Name*</label>
              <input class="ms-5" type="text" id="lastName" name="lastName" required>
            </div>
            <div class="col-lg-6 d-flex px-5 py-4 editing">
              <label for="email">Email*</label>
              <input class="ms-5" type="email" id="emaill" name="email" required>
            </div>
            <div class="col-lg-6 d-flex px-5 py-4 editing">
              <label for="phone">Phone*</label>
              <input class="ms-5" type="text" id="phone" name="phone" required>
            </div>
            <button id="edit" class="update btn btn-primary mt-6" type="submit">Update Profile</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Start Footer -->
  <!-- <div class="footer pt-5 pb-5 text-md-start text-center text-white-50 mt-5">
    <div class="container">
      <div class="row">
        <div class="col-md-6 col-lg-4 mb-5 mb-lg-0">
          <img src="/imgs/logo.png" alt="">
          <p class="mt-4">
            In Egypt, the walking rhyme,
            the charming sentence,
            the rebellious article,
            and the fragrant idea
          </p>
          <div class="copyright mt-5">
            Created By <span>Saqr</span>
            <div>&copy; 2024 - <span>BFCAI</span></div>
          </div>
        </div>
        <div class="col-md-6 col-lg-2 mb-5 mb-lg-0">
          <h5 class="text-light">Quick Links</h5>
          <ul class="list-unstyled lh-lg">
            <li><a href="#">Home</a></li>
            <li><a href="#">About</a></li>
            <li><a href="#">Services</a></li>
            <li><a href="#">Blog</a></li>
            <li><a href="#">Contact</a></li>
          </ul>
        </div>
        <div class="col-md-6 col-lg-3 mb-5 mb-lg-0">
          <h5 class="text-light">Contact Us</h5>
          <ul class="list-unstyled lh-lg">
            <li><a href="#">+123-456-789</a></li>
            <li><a href="#">+123-456-789</a></li>
            <li><a href="#">info@company.com</a></li>
            <li><a href="#">Contact Us</a></li>
          </ul>
        </div>
        <div class="col-md-6 col-lg-3">
          <h5 class="text-light">Follow Us</h5>
          <ul class="list-unstyled lh-lg d-flex">
            <li>
              <a href="#"><i class="fa-brands fa-facebook fa-2x"></i></a>
            </li>
            <li>
              <a href="#"><i class="fa-brands fa-twitter fa-2x"></i></a>
            </li>
            <li>
              <a href="#"><i class="fa-brands fa-youtube fa-2x"></i></a>
            </li>
            <li>
              <a href="#"><i class="fa-brands fa-linkedin fa-2x"></i></a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div> --> -->
  <!-- End Footer -->

  <!-- Start Loading -->
  <!-- <div class="loading justify-content-center align-items-center text-center">
    <img src="/imgs/loading.gif" alt="">
  </div> -->
  <!-- End Loading -->

  <!-- <script>
    document.addEventListener('DOMContentLoaded', function () {
      if (localStorage.getItem('email')) {
        document.getElementById('user-name-text').textContent = localStorage.getItem('firstName') + ' ' + localStorage.getItem('lastName');
        document.querySelector('.user-name').style.display = 'flex';
        document.getElementById('lgn').style.display = 'none';
      }

      document.getElementById('signout').addEventListener('click', function (e) {
        e.preventDefault();
        localStorage.clear();
        location.href = '/index.html';
      });

      document.getElementById('edit').addEventListener('click', function () {
        var firstName = document.getElementById('firstName').value;
        var lastName = document.getElementById('lastName').value;
        var email = document.getElementById('emaill').value;
        var phone = document.getElementById('phone').value;

        localStorage.setItem('firstName', firstName);
        localStorage.setItem('lastName', lastName);
        localStorage.setItem('email', email);
        localStorage.setItem('phone', phone);

        if (localStorage.getItem('email')) {
          document.getElementById('user-name-text').textContent = localStorage.getItem('firstName') + ' ' + localStorage.getItem('lastName');
          document.querySelector('.user-name').style.display = 'flex';
          document.getElementById('lgn').style.display = 'none';
        }

        var successAlart = document.getElementById('success-Alart');
        var failAlart = document.getElementById('fail-Alart');

        if (firstName && lastName && email && phone) {
          successAlart.textContent = "Profile updated successfully!";
          successAlart.style.color = "green";
          setTimeout(function () {
            successAlart.textContent = "";
          }, 3000);
        } else {
          failAlart.textContent = "All fields are required!";
          failAlart.style.color = "red";
          setTimeout(function () {
            failAlart.textContent = "";
          }, 3000);
        }
      });
    });
  </script>
</body>

</html> --> 
