<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EgyVoyage</title>
  <link rel="stylesheet" href="/css/all.min.css">
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/home.css">
  <link rel="stylesheet" href="/css/all-hotels.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,200;0,9..40,300;0,9..40,400;0,9..40,500;1,9..40,300&display=swap">
</head>


<body>
  <nav class="navbar navbar-expand-lg">
    <a class="navbar-brand" href="#"><img src="/imgs/logo.png" class="" alt=""></a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <i class="fa-solid fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav m-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link p-3 active" aria-current="page" href="/index.html">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link p-3" href="/destination.html">Destination</a>
        </li>
        <li class="nav-item">
          <a class="nav-link p-3" href="/all-hotels.html">Our Hotels</a>
        </li>
      </ul>
      <a class="btn btn-primary opacity-75 px-3" id="lgn" role="button">Login</a>
      <div id="login-overlay">
          <div class="login-container p-4">
              <h1>Login<span class="closeBtn">x</span></h1>
              <form action="/login" method="post">
                  <div class="d-flex justify-content-between mt-5 lgn-display">
                      <div class="name-pass d-flex">
                          <label for="username">Username or Email</label>
                          <input type="text" id="username" name="username" placeholder="Username or Email">
                      </div>
                      <div class="name-pass d-flex">
                          <label for="password">Password</label>
                          <input type="password" id="password" name="password" placeholder="Password">
                      </div>
                  </div>
                  <button id="signin" type="submit">Sign In</button>
                  <div class="clk-a d-flex flex-column">
                      <a style="cursor: pointer;" class="first-a" id="forgetPassword" >Forgot Password?</a>
                      <span class="hv-account">DO NOT HAVE AN ACCOUNT?</span>
                      <a class="last-a" href="/register.html">Create an Account</a>
                  </div>
              </form>
            </div>
        </div>
    </div>


    <div id="forgot-password-overlay" style="display: none;">
      <div class="forgot-password-container p-4">
          <h1>Forgot Password<span class="closeBtn">x</span></h1>
          <hr>
          <form action="/forgot-password" method="post">
              <div class="d-flex justify-content-between mt-5">
                  <div class="email-input d-flex justify-content-between align-items-center">
                      <label for="forgot-email">Email :</label>
                      <input type="email" id="forgot-email" name="email" placeholder="Email">
                  </div>
              </div>
              <button id="send-reset-link" type="submit">Continue</button>
          </form>
      </div>
  </div>
  

<div id="verify-code-overlay" style="display: none;">
  <div class="verify-code-container p-4">
    <h1>Verify Code<span class="closeBtn">x</span></h1>
    <hr>
    <form action="/verify-code" method="post">
      <div class="d-flex justify-content-between mt-5">
        <div class="code-input d-flex">
          <label for="verify-code">Code</label>
          <input type="text" id="verify-code" name="code" placeholder="Verification Code">
        </div>
      </div>
      <button id="verify-code-button" type="submit">Submit</button>
    </form>
  </div>
</div>


<div style="display: none;" class="user-name user-info">
  <span id="user-name-icon"><i class="fa-solid fa-user me-2"></i></span>
  <span id="user-name-text"></span>
  <span><i class="ms-2 fa-solid fa-caret-down"></i></span>
  <ul>
    <li><a href="/user-dashboard/user.html">Dashboard</a></li>
    <li><a href="/user-dashboard/edit-profile.html">Edit Profile</a></li>
    <li><a id="signout" href="#">Signout</a></li>
  </ul>
</div>
  </nav>
  <!-- End Navbar -->


  <!-- Alert -->
<div id="alertBox" class="alert">
  <span class="closebtn" onclick="closeAlert()">&times;</span>
  <span id="alertMessage"></span>
</div>
<!-- Alert -->




<!-- Start Tours -->
<div class="main-tour pt-5 pb-5">
  <div class="conatiner">
    <div class="mt-4 d-flex justify-content-center align-items-center flex-column">
      <h1 class="fw-bold">Destination Selected</h1>
    </div>
  </div>
</div>

<div class="tours mt-5 mb-5">
  <div class="container">
    <div class="row search-hotel" id="search-hotel">

<!--       
      <div class="col-sm-12 col-md-4 col-lg-3">
        <a href="/Tours-details/first-tour.html">
          <div class="box mb-5">
            <img class="img-fluid hotel-image" src="" alt="">
            <div class="text p-5">
              <h4 class="fw-bold fs-4 mb-3 main-head"></h4>
              <div class="rate mb-3"><i class="filled fas fa-star"></i><span class="hotel-rate"></span></div>
              <span class="hotel-location"></span>
              <p class="mt-3">From <Span class="hotel-price"></Span></p>
            </div>
          </div>
        </a>
      </div> -->

      <div class="hotelAvaliable" style="display: block;">
        <h1>No Hotels Available in This Location</h1>
      </div>
    </div>
  </div>
</div>
<!-- End Tours -->


<!-- Start Footer -->
<nav class="navbar nav-footer navbar-expand-lg p-3">
  <div class="container foot">
    <ul class="navbar-nav me-auto mb-lg-0">
      <li class="nav-item">
        <a class="nav-link" aria-current="page" href="#">Home</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">About</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">Blog</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">Contact</a>
      </li>
    </ul>
    <div>Copyright Â© 2024 GoodLayers. All Rights Reserved.</div>
  </div>
</nav>
<!-- End Footer -->

<script src="/js/all.min.js"></script>
<script src="/js/bootstrap.bundle.min.js"></script>
<script>


const url = window.location.href;
function extractParamValue(url) {
  return function(parameterName) {
    const queryString = url.split('?')[1];
    if (queryString) {
      const queryParams = new URLSearchParams(queryString);
      if (queryParams.has(parameterName)) {
        return queryParams.get(parameterName);
      }
    }
    return null;
  };
}
let getParamValue = extractParamValue(url);
const locationValue = getParamValue('location');
console.log(locationValue); 



// Properites of clickable hotel
async function readHotelsDestination () {
  console.log("Before Fetch");
  try {
    let response = await fetch (`http://egyvoyage2.somee.com/api/Hotel`);
    let data = await response.json();
    const filteredRelatedHotels = data.filter(hotel => hotel.location.trim().toLowerCase() === locationValue);
    console.log(filteredRelatedHotels);
    for(let i= 0; i<=filteredRelatedHotels.length;i++) {
      let content = `
      <div class="col-sm-12 col-md-6 col-lg-4">
        <a href="/hotel-details.html?id=${filteredRelatedHotels[i].id}&location=${filteredRelatedHotels[i].location}" id=link>
          <div class="box mb-5">
            <img class="img-fluid hotel-image" src="${filteredRelatedHotels[i].image}" alt="">
            <div class="text p-5">
              <h4 class="fw-bold fs-4 mb-3 main-head">${filteredRelatedHotels[i].name}</h4>
              <div class="rate mb-3"><i class="filled fas fa-star"></i><span class="hotel-rate">${filteredRelatedHotels[i].rating}</span></div>
              <span class="hotel-location">${filteredRelatedHotels[i].location}</span>
              <p class="mt-3">From <Span class="hotel-price">$${filteredRelatedHotels[i].price}</Span></p>
            </div>
          </div>
        </a>
      </div>`;
      document.querySelector("#search-hotel").innerHTML +=content;
      document.querySelector(".hotelAvaliable").style.display="none";
      }
  } catch(reason) {
    console.log(`Erorr ${reason}`);
  } finally {
    console.log("After Fetch")
  }
}
readHotelsDestination();

</script>
<script src="/js/login.js"></script>
</body>
</html>